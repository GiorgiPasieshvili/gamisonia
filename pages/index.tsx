import Head from "next/head";
import { GetStaticProps } from "next";

import { groq } from "next-sanity";
import { sanityClient } from "sanity";

// Import Components
import Header from "@/components/Header";
import Hero from "@/components/Hero";
import Projects from "@/components/Projects";
import About from "@/components/About";
import Contact from "@/components/Contact";
import Footer from "@/components/Footer";

type Props = {
  pageInfo: any;
  projects: any;
  socials: any;
};

export default function Home({ pageInfo, projects, socials }: Props) {
  return (
    <div className="desktop-snap">
      <Head>
        <title>Gamisonia Design</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <div className="desktop-snap-start">
        <Header />
        <Hero pageInfo={pageInfo} />
      </div>

      <div className="desktop-snap-center">
        <Projects projects={projects} />
      </div>
      <div className="desktop-snap-center">
        <About pageInfo={pageInfo} />
      </div>
      <div className="desktop-snap-center">
        <Contact pageInfo={pageInfo} />
      </div>

      <div className="desktop-snap-end">
        <Footer socials={socials} />
      </div>
    </div>
  );
}

export const getStaticProps: GetStaticProps<Props> = async () => {
  const pageInfoQuery = groq`
    *[_type == "pageInfo"][0]
  `;

  const projectsQuery = groq`
    *[_type == "project"]
  `;

  const socialsQuery = groq`
    *[_type == "social"]
  `;

  const pageInfo = await sanityClient.fetch(pageInfoQuery);
  const projects = await sanityClient.fetch(projectsQuery);
  const socials = await sanityClient.fetch(socialsQuery);

  return {
    props: {
      pageInfo,
      projects,
      socials,
    },
    revalidate: 10,
  };
};
